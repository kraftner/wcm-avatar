!function(e,t,n,i){"use strict";var o={};o.Logo=n.Model.extend({urlRoot:ajaxurl,defaults:{container:{},templates:{},l10n:{},att_id:0,width:0,height:0,thumb:"",name:"",link:""},initialize:function(){},fetch:function(){var e=this;t.when(t.post(this.urlRoot,{action:i.action,_ajax_nonce:i._ajax_nonce,att_id:e.get("att_id"),task:"fetch"})).done(function(t){e.set({thumb:t.data.thumb,name:t.data.name,width:t.data.width,height:t.data.height,link:t.data.link})}).fail(function(e){})},save:function(e){},destroy:function(e){var n=this;return t.when(t.post(this.urlRoot,{action:i.action,_ajax_nonce:i._ajax_nonce,att_id:n.get("att_id"),task:"destroy"})).done(function(e){}).fail(function(e){}),{}}}),e.wcm=e.wcm||{},e.wcm.logo=e.wcm.logo||{},e.wcm.logo.models=o}(this,jQuery,Backbone,logoUploader),function(e,t,n,i,o){"use strict";var a={};a.Preview=i.View.extend({template:n.template(e(t.templates.logo).html(),null,{variable:"data"}),initialize:function(){this.model.get("att_id");this.render(),this.listenTo(this.model,"change",function(n){e("#"+t.container.main).find(".wrap").removeClass("hidden"),e("#"+t.container.uploader).addClass("hidden")})},hide:function(){var t=e(this.$el).find(".wrap");t.hasClass("hidden")&&t.removeClass("hidden")},show:function(){var t=e(this.$el).find(".wrap");!t.hasClass("hidden")&&t.addClass("hidden")},render:function(){return this.$el.html(this.template(this.model.attributes)),this}}),a.Thumb=i.View.extend({template:n.template(e(t.templates.thumb).html(),null,{variable:"data"}),events:{},initialize:function(){this.listenTo(this.model,"change:thumb",this.render),this.render()},render:function(){return this.$el.html(this.template(this.model.attributes)),this}}),a.Delete=i.View.extend({template:n.template(e(t.templates.delete).html(),null,{variable:"data"}),events:{"click .icon":"deleteAttachment","mouseover .icon":"onHover","mouseleave .icon":"onOut"},initialize:function(){this.render()},render:function(){return this.$el.html(this.template(this.model.attributes)),e(this.$el).find(".icon").css("background-color",this.model.get("color1")),this},deleteAttachment:function(n){e("#"+t.container.main).find(".wrap").addClass("hidden"),e("#"+t.container.uploader).removeClass("hidden"),e("#media-items").empty();this.model.destroy(this.model.get("att_id"));return!1},onHover:function(t){e(this.$el).find(".icon").css("color",this.model.get("color2"))},onOut:function(t){e(this.$el).find(".icon").css("color","#fff")}}),a.Caption=i.View.extend({template:n.template(e(t.templates.caption).html(),null,{variable:"data"}),initialize:function(){this.render(),this.listenTo(this.model,"change",this.render)},render:function(){return this.$el.html(this.template(this.model.attributes)),this}}),window.wcm=window.wcm||{},window.wcm.logo=window.wcm.logo||{},window.wcm.logo.views=a}(jQuery,logoUploader,_,Backbone,uploader),function(e,t,n,i,o,a){"use strict";var l=new o.Logo,d={};l.set(n.extend(i.data,{container:i.container,templates:i.templates,l10n:i.l10n})),l.on("change",l.fetch),d.Preview=new a.Preview({el:t("#"+i.container.main),model:l}),d.Thumb=new a.Thumb({el:t("#"+i.container.thumb),model:l}),d.Delete=new a.Delete({el:t("#"+i.container.delete),model:l}),d.Caption=new a.Caption({el:t("#"+i.container.caption),model:l}),t(document).ready(function(){uploader.bind("FileUploaded",function(e,t,n){if(200===n.status){var i=n.response;i=i.replace(/^<pre>(\d+)<\/pre>$/,"$1"),i.match(/media-upload-error|error-div/)||l.set({att_id:n.response})}})})}(window,jQuery,_,logoUploader,window.wcm.logo.models,window.wcm.logo.views);
